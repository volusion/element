{"componentChunkName":"component---src-templates-docs-js","path":"/how-to/interact-with-the-cart","result":{"data":{"site":{"siteMetadata":{"title":"Element Documentation | Volusion","docsLocation":"https://github.com/volusion/element"}},"mdx":{"fields":{"id":"12e344ef-2c7f-5f00-81f1-9f7674d98df9","title":"Interact with the Cart","slug":"/how-to/interact-with-the-cart"},"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Interact with the Cart\",\n  \"metaTitle\": \"Interact with the Cart\",\n  \"metaDescription\": \"Some of your custom blocks may need to interact with the cart. You can do this with the included PubSubJS mechanism.\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Some of your custom blocks may need to interact with the cart\\u2014for example, if you wanted to add an item to the cart from your block, or trigger an action in your block after a shopper adds an item to the cart. You can do this with the included PubSubJS mechanism.\"), mdx(\"h2\", null, \"1. Listening for a Cart Event\"), mdx(\"p\", null, \"If you want your block to respond to changes in the cart, you should set up your block to listen for a cart event using PubSubJS.\"), mdx(\"h3\", null, \"Add a Subscription in Your Block's componentDidMount Function\"), mdx(\"p\", null, \"Locate the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"componentDidMount\"), \" function of one of your blocks. If this function doesn't exist yet, add it to your component. You may need to refactor the block to use class syntax. Then add a subscription:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"componentDidMount() {\\n    this.props.pubSub.subscribe(\\n        this.props.events.cart.itemAddedToCart, // must match one of the cart events\\n        this.handleItemAdded\\n    );\\n}\\n\")), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"utils.pubSub.subscribe()\"), \" takes two arguments:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"A topic name, which should be one of the \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"/element/references/cart-events\"\n  }), \"Cart Events\"), \".\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"A handler function\\u2014the message will be passed to the handler function.\")), mdx(\"h3\", null, \"Implement Your Handler Function for the Subscription\"), mdx(\"p\", null, \"Your handler function is the code that actually does something with the data received from the cart event. Add it to your block component as an instance property.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"// inside the body of your component\\nhandleItemAdded = (msg, itemData) => {\\n  // do something with itemData. In this example we will set it to state.\\n  this.setState({ itemAdded: itemData })\\n}\\n\")), mdx(\"h2\", null, \"2. Publishing an Event to the Cart\"), mdx(\"p\", null, \"Your block may want to publish an event to the cart. This can allow you to add an item, update an item count, or open the cart panel. In this example, we'll add an item to the cart.\"), mdx(\"h3\", null, \"Add a Function to Send Your Message\"), mdx(\"p\", null, \"Send your message using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"utils.pubSub.publish()\"), \" in your block. This function takes two arguments:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"A topic name, which should be one of the \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"/element/references/cart-events\"\n  }), \"Cart Events\"), \". The cart block will listen for this topic.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"A data value (any type)\\u2014this is the piece of data you will send to the cart.\")), mdx(\"p\", null, \"Example:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"// in your block component body, add a function. Here we're doing it as an instance property because this component is a class.\\naddItem = itemData => {\\n  this.props.pubSub.publish(this.props.events.cart.addToCart, itemData)\\n}\\n\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Note:\"), \" If your component is a stateless functional component rather than an ES6 class, you would define your function as a const rather than an instance property.\"), mdx(\"p\", null, \"In this example, the cart block expects \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"itemData\"), \" to be an object with the following properties:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"{\\n  productId, quantity, variantId, itemPrice\\n}\\n\")), mdx(\"h2\", null, \"Further Reading\"), mdx(\"p\", null, \"To get a sense of what cart interactions are possible, see \\\"\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/element/references/cart-events\"\n  }), \"Cart Events\"), \".\\\"\"), mdx(\"p\", null, \"For more details on PubSubJS, see the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.npmjs.com/package/pubsub-js\"\n  }), \"PubSubJS npm reference\"), \".\"));\n}\n;\nMDXContent.isMDXComponent = true;","tableOfContents":{"items":[{"url":"#1-listening-for-a-cart-event","title":"1. Listening for a Cart Event","items":[{"url":"#add-a-subscription-in-your-blocks-componentdidmount-function","title":"Add a Subscription in Your Block's componentDidMount Function"},{"url":"#implement-your-handler-function-for-the-subscription","title":"Implement Your Handler Function for the Subscription"}]},{"url":"#2-publishing-an-event-to-the-cart","title":"2. Publishing an Event to the Cart","items":[{"url":"#add-a-function-to-send-your-message","title":"Add a Function to Send Your Message"}]},{"url":"#further-reading","title":"Further Reading"}]},"parent":{"__typename":"File","relativePath":"how-to/interact-with-the-cart.md"},"frontmatter":{"metaTitle":"Interact with the Cart","metaDescription":"Some of your custom blocks may need to interact with the cart. You can do this with the included PubSubJS mechanism."}},"allMdx":{"edges":[{"node":{"fields":{"slug":"/introduction","title":"What Is Element?"}}},{"node":{"fields":{"slug":"/explanations","title":"Explanations"}}},{"node":{"fields":{"slug":"/how-to","title":"How-to Guides"}}},{"node":{"fields":{"slug":"/","title":"Element Platform documentation"}}},{"node":{"fields":{"slug":"/references","title":"Reference"}}},{"node":{"fields":{"slug":"/tutorials","title":"Tutorials"}}},{"node":{"fields":{"slug":"/tutorials/building-an-element-page","title":"Building An Element Page Tutorial"}}},{"node":{"fields":{"slug":"/tutorials/product-landing-page","title":"Implementing a New Product Landing Page Tutorial"}}},{"node":{"fields":{"slug":"/tutorials/site-designer","title":"Design A New Theme With Site Designer Tutorial"}}},{"node":{"fields":{"slug":"/tutorials/proptypes","title":"Working With Element Proptypes Tutorial"}}},{"node":{"fields":{"slug":"/references/cart-events","title":"Cart Events"}}},{"node":{"fields":{"slug":"/references/element-cli","title":"Element CLI"}}},{"node":{"fields":{"slug":"/how-to/add-blocks-to-templates","title":"Add Blocks to Templates"}}},{"node":{"fields":{"slug":"/references/block-utils","title":"Block Utils"}}},{"node":{"fields":{"slug":"/references/styling-your-block-with-css","title":"Styling Your Block With CSS"}}},{"node":{"fields":{"slug":"/references/proptypes","title":"Proptypes"}}},{"node":{"fields":{"slug":"/references/sdk","title":"Element SDK Client"}}},{"node":{"fields":{"slug":"/how-to/add-page-to-theme","title":"How to Add a Page to a Theme"}}},{"node":{"fields":{"slug":"/how-to/data-volusion-api","title":"Fetch Data from Volusion's API"}}},{"node":{"fields":{"slug":"/how-to/communicate-between-blocks","title":"Communicate Between Blocks"}}},{"node":{"fields":{"slug":"/how-to/add-page-with-uri-parameters","title":"How to Add a Page That Depends on URI Parameters"}}},{"node":{"fields":{"slug":"/how-to/data-third-party-services","title":"Fetch Data from Third-Party Services"}}},{"node":{"fields":{"slug":"/how-to/add-external-scripts-from-a-block","title":"Add External Scripts from a Block"}}},{"node":{"fields":{"slug":"/how-to/env-setup","title":"Environment Setup"}}},{"node":{"fields":{"slug":"/how-to/fetch-data-fast","title":"Fetch Block Data Fast"}}},{"node":{"fields":{"slug":"/how-to/get-approved-to-develop-blocks","title":"How to Get Approved to Develop Blocks"}}},{"node":{"fields":{"slug":"/how-to/preview-block-changes","title":"Preview Block Changes"}}},{"node":{"fields":{"slug":"/how-to/read-page-uri-parameters-in-blocks","title":"Read Page URI Parameters In Blocks"}}},{"node":{"fields":{"slug":"/how-to/interact-with-the-cart","title":"Interact with the Cart"}}},{"node":{"fields":{"slug":"/how-to/proptypes","title":"Add Element Proptypes"}}},{"node":{"fields":{"slug":"/how-to/release-a-minor-block-change","title":"Release A Minor Block Change"}}},{"node":{"fields":{"slug":"/how-to/set-seo-data-from-a-block","title":"Set SEO Data from a Block"}}},{"node":{"fields":{"slug":"/how-to/style-a-block-with-aphrodite","title":"Style A Block With Aphrodite"}}},{"node":{"fields":{"slug":"/how-to/reuse-a-block-across-pages","title":"Reuse A Block Across Pages"}}},{"node":{"fields":{"slug":"/how-to/rollback-a-block-change","title":"Rollback A Block Change"}}},{"node":{"fields":{"slug":"/how-to/release-a-new-major-block-version","title":"Release A New Major Block Version"}}},{"node":{"fields":{"slug":"/how-to/use-react-hooks-in-a-block","title":"Use React Hooks in an Element Block"}}},{"node":{"fields":{"slug":"/how-to/track-block-versions","title":"Track Block Versions"}}},{"node":{"fields":{"slug":"/explanations/adding-a-blog","title":"Adding a Blog"}}},{"node":{"fields":{"slug":"/explanations/all-the-tech-you-need","title":"All The Tech You Need"}}},{"node":{"fields":{"slug":"/explanations/e-commerce-pages","title":"Ecommerce Theme Pages"}}},{"node":{"fields":{"slug":"/explanations/block-versions","title":"Block Versions"}}},{"node":{"fields":{"slug":"/explanations/keeping-your-site-fast","title":"Keeping Your Site Fast"}}},{"node":{"fields":{"slug":"/explanations/element-concepts","title":"Element Concepts"}}},{"node":{"fields":{"slug":"/explanations/what-is-element","title":"What Is Element?"}}}]}},"pageContext":{"id":"12e344ef-2c7f-5f00-81f1-9f7674d98df9"}}}