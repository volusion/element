{"componentChunkName":"component---src-templates-docs-js","path":"/how-to/read-page-uri-parameters-in-blocks","result":{"data":{"site":{"id":"Site","siteMetadata":{"title":"Element Documentation | Volusion","docsLocation":"https://github.com/volusion/element"}},"mdx":{"id":"4c4c9558-9967-5919-91d2-7c5c25ddd5e4","fields":{"id":"4c4c9558-9967-5919-91d2-7c5c25ddd5e4","title":"Read Page URI Parameters In Blocks","slug":"/how-to/read-page-uri-parameters-in-blocks"},"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Read Page URI Parameters In Blocks\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Sometimes, your blocks may need to read URI parameters from the page, so that you can get data such as the name of the particular product or category that the shopper is viewing.\"), mdx(\"p\", null, \"These URI parameters are also known as \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"pageVars\"), \" in the Element ecosystem.\"), mdx(\"p\", null, \"This guide will show you how to set up a pageVar in your block's config, so that the value will be readable in your block code.\"), mdx(\"h2\", null, \"1. Create a Private Property for Your pageVar\"), mdx(\"p\", null, \"Locate the definition of your \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"configSchema\"), \" in your block code. Add a new \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ElementPropTypes.readOnly\"), \" property to your config, and set \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"isPrivate\"), \" to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"true\"), \". Using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"isPrivate\"), \" will make it so that merchants using your block do not see this setting.\"), mdx(\"p\", null, \"Example with a property called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"productSlug\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"export const getConfigSchema = ElementPropTypes => ({\\n    productSlug: {\\n        label: 'Product Slug URI Identifier',\\n        type: ElementPropTypes.readOnly,\\n        isPrivate: true\\n    }\\n})\\n\")), mdx(\"p\", null, \"Note: If you want this value to be editable in the block's settings panel by you or your agency members, you can use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ElementPropTypes.string\"), \" instead.\"), mdx(\"h2\", null, \"2. Set Your defaultConfig to Use 'pageVar:pageUrlText'\"), mdx(\"p\", null, \"Locate the definition of your \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"defaultConfig\"), \" in your block code. Set the value for your pageVar property to be \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"'pageVar:pageUrlText'\"), \".\"), mdx(\"p\", null, \"Example:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"export const defaultConfig = { productSlug: 'pageVar:pageUrlText' };\\n\")), mdx(\"h2\", null, \"3. Use the pageVar in Your getDataProps Function\"), mdx(\"p\", null, \"The property that you added to your configSchema will now be available for use in your block's \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"getDataProps\"), \" function. You can use it to retrieve the product data.\"), mdx(\"p\", null, \"Example: (Note: the second argument to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"getDataProps()\"), \" is the block's props, which are destructured in place)\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"export const getDataProps = (utils, { productSlug }) => {\\n    return utils.client.products\\n        .getBySlug(productSlug)\\n        .then(product => { product })\\n        .catch(() => {});\\n};\\n\")), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"getDataProps\"), \" gets called like this in your block:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"getDataProps(window.ElementSdk, props)\\n\")), mdx(\"h2\", null, \"4. Set Your Page Path to Use :pageUrlText\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Navigate to Site Designer, and if you are not already editing your theme, click the \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"edit\"), \" (or \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"continue editing\"), \") button to open your theme.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Click the \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"pages dropdown\"), \" to expand it.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Click the \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"gear icon\"), \" for the page that will have your block, for example, Product Details.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The settings panel should now be open for your page, and you should see a field for \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Page Path\"), \". Ensure that the value at the end of the path is \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \":pageUrlText\"), \". For example, on the Product Details page, the correct Page Path would be \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"/p/:pageUrlText\"), \".\")), mdx(\"h2\", null, \"More Data from the URI: Read Query Params from Block Props\"), mdx(\"p\", null, \"Your block's \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"props\"), \" also contain some extra data that can be useful in combination with the pageVar data.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"strong\"\n  }, \"props.queryParams\")), \" returns an object with the query params from the page URI.\"), mdx(\"p\", null, \"For example, the URI \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"https://myvolusionstore.com/c/shirts?page=2&sortBy=Lowest%20Price\"), \" will return the following value for \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"props.queryParams\"), \" in your block code:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"{\\n    page: '2',\\n    sortBy: 'Lowest Price'\\n}\\n\")), mdx(\"h3\", null, \"Query Params Are Also Available in getDataProps\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"export const getDataProps = (utils, props) => {\\n  // you can use props.queryParams here (or queryParams if you destructured the props argument)\\n\")), mdx(\"p\", null, \"As an example, you could use query params to figure out which page of results the shopper is viewing, and return corresponding products from the Volusion API.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"export const getDataProps = (utils, props) => {\\n    const { queryParams = {} } = props;\\n\\n    const categoryId = 'something hard coded or from another API request';\\n    const page = Number(queryParams.page) || 1;\\n    const sortMethod = queryParams.sortBy || props.defaultSortMethod;\\n    return utils.client.products\\n        .getByCategoryId({\\n            categoryId,\\n            pageSize,\\n            page,\\n            sortMethod\\n        }).then((data = {}) => {\\n            // transform data\\n        }).catch(() => {\\n            // catch error and return a default response\\n        });\\n}\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;","tableOfContents":{"items":[{"url":"#1-create-a-private-property-for-your-pagevar","title":"1. Create a Private Property for Your pageVar"},{"url":"#2-set-your-defaultconfig-to-use-pagevarpageurltext","title":"2. Set Your defaultConfig to Use 'pageVar:pageUrlText'"},{"url":"#3-use-the-pagevar-in-your-getdataprops-function","title":"3. Use the pageVar in Your getDataProps Function"},{"url":"#4-set-your-page-path-to-use-pageurltext","title":"4. Set Your Page Path to Use :pageUrlText"},{"url":"#more-data-from-the-uri-read-query-params-from-block-props","title":"More Data from the URI: Read Query Params from Block Props","items":[{"url":"#query-params-are-also-available-in-getdataprops","title":"Query Params Are Also Available in getDataProps"}]}]},"parent":{"__typename":"File","id":"d222c4dc-a826-519a-b807-4300214226de","relativePath":"how-to/read-page-uri-parameters-in-blocks.md"},"frontmatter":{"metaTitle":null,"metaDescription":null}},"allMdx":{"edges":[{"node":{"id":"4ed428d0-4393-5c29-bd26-b3f6bbe2db1c","fields":{"slug":"/explanations","title":"Explanations"}}},{"node":{"id":"61a634d8-2338-5017-8e1c-509725f49d98","fields":{"slug":"/introduction","title":"What Is Element?"}}},{"node":{"id":"370f11d8-9cd8-5fc4-9ef4-9f5871e56569","fields":{"slug":"/how-to","title":"How-to Guides"}}},{"node":{"id":"d1fb5fdb-dbb5-55b1-8096-e16b7d396f12","fields":{"slug":"/references","title":"Reference"}}},{"node":{"id":"68edeef5-7429-56de-a4af-247330807814","fields":{"slug":"/tutorials","title":"Tutorials"}}},{"node":{"id":"4327ecbe-7464-5164-b008-8c846d5ff0dc","fields":{"slug":"/tutorials/building-an-element-page","title":"Building An Element Page"}}},{"node":{"id":"b64a8e2f-4941-5823-8878-14f78880075e","fields":{"slug":"/tutorials/product-landing-page","title":"Product Landing Page"}}},{"node":{"id":"1ad53085-98e5-58cd-835b-0984cf51e675","fields":{"slug":"/tutorials/proptypes","title":"Proptypes"}}},{"node":{"id":"5a35b724-5567-5460-888c-76b5d79b891c","fields":{"slug":"/tutorials/site-designer","title":"Site Designer"}}},{"node":{"id":"2b667504-cf5a-5d59-9706-4c04700943e7","fields":{"slug":"/references/block-utils","title":"Block Utils"}}},{"node":{"id":"fda76190-915d-5e9e-a6a8-504480af04f3","fields":{"slug":"/references/cart-events","title":"Cart Events"}}},{"node":{"id":"1825ca75-3c29-52f1-bb1f-4eae66db4b1a","fields":{"slug":"/references/element-cli","title":"Element CLI Reference"}}},{"node":{"id":"aba6f9ec-4f17-5ec6-a0d4-8dc12bf1ab9a","fields":{"slug":"/references/sdk","title":"SDK"}}},{"node":{"id":"161a1eb3-9efd-5118-bb8f-8743df907155","fields":{"slug":"/references/proptypes","title":"Proptypes"}}},{"node":{"id":"71591094-c72e-572a-9f15-89b6b02f503b","fields":{"slug":"/references/styling-your-block-with-css","title":"Styling Your Block With CSS"}}},{"node":{"id":"a1454030-a9e1-5d3a-8040-62253c1fbda7","fields":{"slug":"/explanations/all-the-tech-you-need","title":"All The Tech You Need"}}},{"node":{"id":"291faf2f-80cb-57fb-aad1-3437ca00f540","fields":{"slug":"/explanations/adding-a-blog","title":"Adding a Blog"}}},{"node":{"id":"5110521b-1352-50bc-950d-165884ce96a2","fields":{"slug":"/explanations/block-versions","title":"Block Versions"}}},{"node":{"id":"1629efa8-07b6-59a6-8f9c-0b16d10b56d7","fields":{"slug":"/explanations/what-is-element","title":"What Is Element?"}}},{"node":{"id":"a88e37c4-1e0e-5cde-8694-08ac4084599b","fields":{"slug":"/explanations/e-commerce-pages","title":"E-commerce Theme Pages"}}},{"node":{"id":"bfc7c8bc-d7be-5475-890e-5787c55118c4","fields":{"slug":"/explanations/element-concepts","title":"Element Concepts"}}},{"node":{"id":"e58e7ec0-6076-5b54-aba8-c4af913e6096","fields":{"slug":"/explanations/keeping-your-site-fast","title":"Keeping Your Site Fast"}}},{"node":{"id":"4080456d-d1b4-5135-b683-2ef5b94b6992","fields":{"slug":"/how-to/add-blocks-to-template","title":"Add Blocks to Templates"}}},{"node":{"id":"a3792a5e-9d5b-5c0b-b769-0fa6845f8671","fields":{"slug":"/how-to/add-external-scripts-from-a-block","title":"Add External Scripts from a Block"}}},{"node":{"id":"5135265d-2bf0-52cf-8ca8-b6ed601db562","fields":{"slug":"/how-to/add-page-to-theme","title":"How to Add a Page to a Theme"}}},{"node":{"id":"335ed663-0bb8-5c63-aa81-b96e88465af4","fields":{"slug":"/how-to/add-page-with-uri-parameters","title":"How to Add a Page That Depends on URI Parameters"}}},{"node":{"id":"59be3233-2988-54dc-aa18-08ff48ee76cb","fields":{"slug":"/how-to/data-third-party-services","title":"Data ThirdParty Services"}}},{"node":{"id":"39da7718-2b20-5b0e-93d4-656400fbf1fb","fields":{"slug":"/how-to/communicate-between-blocks","title":"Communicate Between Blocks"}}},{"node":{"id":"8324d8b8-a7ed-50be-8c56-a06756bc5a65","fields":{"slug":"/how-to/data-volusion-api","title":"Data Volusion API"}}},{"node":{"id":"4a786713-7c70-5503-8c68-ac481805b0d1","fields":{"slug":"/how-to/fetch-data-fast","title":"Fetch Data Fast"}}},{"node":{"id":"a7103c51-9f05-5b3f-90a5-09539c4155f8","fields":{"slug":"/how-to/env-setup","title":"Environment Setup"}}},{"node":{"id":"5f4b2bd9-4455-54c8-83ab-6caec695705b","fields":{"slug":"/how-to/get-approved-to-develop-blocks","title":"How to Get Approved to Develop Blocks"}}},{"node":{"id":"f3e278ac-f916-5708-a522-2208cdc973d9","fields":{"slug":"/how-to/proptypes","title":"Element Proptypes"}}},{"node":{"id":"4faedd60-2afd-52c5-a47d-2c54adff017f","fields":{"slug":"/how-to/interact-with-the-cart","title":"How to Interact with the Cart"}}},{"node":{"id":"8d9d9690-b662-5d15-806d-05d56e8d88df","fields":{"slug":"/how-to/preview-block-changes","title":"Preview Block Changes"}}},{"node":{"id":"4c4c9558-9967-5919-91d2-7c5c25ddd5e4","fields":{"slug":"/how-to/read-page-uri-parameters-in-blocks","title":"Read Page URI Parameters In Blocks"}}},{"node":{"id":"18d35800-0f27-5aaa-91be-af1266ab9280","fields":{"slug":"/how-to/release-a-minor-block-change","title":"Release A Minor Block Change"}}},{"node":{"id":"0f091299-49fb-5acc-814e-a16d0144c01d","fields":{"slug":"/how-to/release-a-new-major-block-version","title":"Release A New Major Block Version"}}},{"node":{"id":"54803fd7-9b7d-56e1-ac82-1ac41eadb05d","fields":{"slug":"/how-to/set-seo-data-from-a-block","title":"Set SEO Data From A Block"}}},{"node":{"id":"73cf6811-1158-51f4-87b3-2401552dc209","fields":{"slug":"/how-to/style-a-block-with-aphrodite","title":"Style A Block With Aphrodite"}}},{"node":{"id":"e8100b80-2f8e-5603-99e1-a862665b82a2","fields":{"slug":"/how-to/reuse-a-block-across-pages","title":"Reuse A Block Across Pages"}}},{"node":{"id":"8c959a01-9f7f-58d9-9785-8ea441afeb6b","fields":{"slug":"/how-to/track-block-versions","title":"Track Block Versions"}}},{"node":{"id":"4988cdb8-e6fd-50c9-857e-40553056b971","fields":{"slug":"/how-to/rollback-a-block-change","title":"Rollback A Block Change"}}},{"node":{"id":"1f280d99-e424-5c54-9735-a3366b681993","fields":{"slug":"/how-to/use-react-hooks-in-a-block","title":"Use React Hooks in an Element Block"}}},{"node":{"id":"2d7ab765-0781-5d3a-8464-23968d98be55","fields":{"slug":"/","title":"Element Platform documentation"}}}]}},"pageContext":{"id":"4c4c9558-9967-5919-91d2-7c5c25ddd5e4"}}}