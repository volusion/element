{"componentChunkName":"component---src-templates-docs-js","path":"/how-to/read-page-uri-parameters-in-blocks","result":{"data":{"site":{"siteMetadata":{"title":"Element Documentation | Volusion","docsLocation":"https://github.com/volusion/element"}},"mdx":{"fields":{"id":"bb1dfabb-2e9f-59f7-a201-3d967fde73df","title":"Read Page URI Parameters In Blocks","slug":"/how-to/read-page-uri-parameters-in-blocks"},"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Read Page URI Parameters In Blocks\",\n  \"metaTitle\": \"Read Page URI Parameters In Blocks\",\n  \"metaDescription\": \"This guide will show you how to set up a pageVar in your block's config so that the value will be readable in your block code.\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Sometimes, your blocks may need to read URI parameters from the page so that you can get data\\u2014such as the name of the particular product or category\\u2014that the shopper is viewing.\"), mdx(\"p\", null, \"These URI parameters are also known as \\\"pageVars\\\" in the Element ecosystem.\"), mdx(\"p\", null, \"This guide will show you how to set up a pageVar in your block's config so that the value will be readable in your block code.\"), mdx(\"h2\", null, \"1. Create a Private Property for Your pageVar\"), mdx(\"p\", null, \"Locate the definition of your \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"configSchema\"), \" in your block code. Add a new \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ElementPropTypes.readOnly\"), \" property to your config and set \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"isPrivate\"), \" to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"true\"), \". Using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"isPrivate\"), \" will prevent merchants using your block from seeing this setting.\"), mdx(\"p\", null, \"Example with a property called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"productSlug\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"import { ElementPropTypes } from '@volusion/element-proptypes'\\n\\nexport const configSchema = {\\n  productSlug: {\\n    label: 'Product Slug URI Identifier',\\n    type: ElementPropTypes.readOnly,\\n    isPrivate: true,\\n  },\\n}\\n\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Note:\"), \" If you want this value to be editable in the block's settings panel by you or your agency members, you can use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ElementPropTypes.string\"), \" instead.\"), mdx(\"h2\", null, \"2. Set Your defaultConfig to Use 'pageVar:pageUrlText'\"), mdx(\"p\", null, \"Locate the definition of your \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"defaultConfig\"), \" in your block code. Set the value for your pageVar property to be \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"'pageVar:pageUrlText'\"), \".\"), mdx(\"p\", null, \"Example:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"export const defaultConfig = { productSlug: 'pageVar:pageUrlText' }\\n\")), mdx(\"h2\", null, \"3. Use the pageVar in Your getDataProps Function\"), mdx(\"p\", null, \"The property that you added to your configSchema will now be available for use in your block's \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"getDataProps\"), \" function. You can use it to retrieve the product data.\"), mdx(\"p\", null, \"Example:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"export const getDataProps = (utils, { productSlug }) => {\\n  return utils.client.products\\n    .getBySlug(productSlug)\\n    .then(product => {\\n      product\\n    })\\n    .catch(() => {})\\n}\\n\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Note:\"), \" The second argument to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"getDataProps()\"), \" is the block's props, which are destructured in place.\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"getDataProps\"), \" gets called like this in your block:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"getDataProps(window.ElementSdk, props)\\n\")), mdx(\"h2\", null, \"4. Set Your Page Path to Use :pageUrlText\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"In your Volusion Dashboard, navigate to \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Site Designer\"), \".\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"If you are not already editing your theme, click the \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"edit\"), \" (or \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"continue editing\"), \") button to open your theme.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Click the \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"pages dropdown\"), \" to expand it.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Click the \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"gear icon\"), \" for the page that the block will appear on (for example, \\\"Product Details\\\").\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The settings panel should now be open for your page, and you should see a field for \\\"Page Path.\\\" Ensure that the value at the end of the path is \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \":pageUrlText\"), \". For example, on the Product Details page, the correct Page Path would be \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"/p/:pageUrlText\"), \".\")), mdx(\"h2\", null, \"More Data from the URI: Read Query Params from Block Props\"), mdx(\"p\", null, \"Your block's \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"props\"), \" also contain some extra data that can be useful in combination with the pageVar data.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"strong\"\n  }, \"props.queryParams\")), \" returns an object with the query params from the page URI.\"), mdx(\"p\", null, \"For example, the URI \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"https://myvolusionstore.com/c/shirts?page=2&sortBy=Lowest%20Price\"), \" will return the following value for \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"props.queryParams\"), \" in your block code:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"{\\n    page: '2',\\n    sortBy: 'Lowest Price'\\n}\\n\")), mdx(\"h3\", null, \"Query Params Are Also Available in getDataProps\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"export const getDataProps = (utils, props) => {\\n  // you can use props.queryParams here (or queryParams if you destructured the props argument)\\n\")), mdx(\"p\", null, \"As an example, you could use query params to figure out which page of results the shopper is viewing, and return corresponding products from the Volusion API.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"export const getDataProps = (utils, props) => {\\n  const { queryParams = {} } = props\\n\\n  const categoryId = 'something hard coded or from another API request'\\n  const page = Number(queryParams.page) || 1\\n  const sortMethod = queryParams.sortBy || props.defaultSortMethod\\n  return utils.client.products\\n    .getByCategoryId({\\n      categoryId,\\n      pageSize,\\n      page,\\n      sortMethod,\\n    })\\n    .then((data = {}) => {\\n      // transform data\\n    })\\n    .catch(() => {\\n      // catch error and return a default response\\n    })\\n}\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;","tableOfContents":{"items":[{"url":"#1-create-a-private-property-for-your-pagevar","title":"1. Create a Private Property for Your pageVar"},{"url":"#2-set-your-defaultconfig-to-use-pagevarpageurltext","title":"2. Set Your defaultConfig to Use 'pageVar:pageUrlText'"},{"url":"#3-use-the-pagevar-in-your-getdataprops-function","title":"3. Use the pageVar in Your getDataProps Function"},{"url":"#4-set-your-page-path-to-use-pageurltext","title":"4. Set Your Page Path to Use :pageUrlText"},{"url":"#more-data-from-the-uri-read-query-params-from-block-props","title":"More Data from the URI: Read Query Params from Block Props","items":[{"url":"#query-params-are-also-available-in-getdataprops","title":"Query Params Are Also Available in getDataProps"}]}]},"parent":{"__typename":"File","relativePath":"how-to/read-page-uri-parameters-in-blocks.md"},"frontmatter":{"metaTitle":"Read Page URI Parameters In Blocks","metaDescription":"This guide will show you how to set up a pageVar in your block's config so that the value will be readable in your block code."}},"allMdx":{"edges":[{"node":{"fields":{"slug":"/explanations","title":"Explanations"}}},{"node":{"fields":{"slug":"/how-to","title":"How-to Guides"}}},{"node":{"fields":{"slug":"/introduction","title":"What Is Element?"}}},{"node":{"fields":{"slug":"/references","title":"Reference"}}},{"node":{"fields":{"slug":"/","title":"Element Platform Documentation"}}},{"node":{"fields":{"slug":"/tutorials","title":"Tutorials"}}},{"node":{"fields":{"slug":"/tutorials/building-an-element-page","title":"Building An Element Page Tutorial"}}},{"node":{"fields":{"slug":"/tutorials/proptypes","title":"Working With Element Proptypes Tutorial"}}},{"node":{"fields":{"slug":"/tutorials/product-landing-page","title":"Implementing a New Product Landing Page Tutorial"}}},{"node":{"fields":{"slug":"/tutorials/site-designer","title":"Design A New Theme With Site Designer Tutorial"}}},{"node":{"fields":{"slug":"/references/block-utils","title":"Block Utils"}}},{"node":{"fields":{"slug":"/references/cart-events","title":"Cart Events"}}},{"node":{"fields":{"slug":"/references/element-cli","title":"Element CLI"}}},{"node":{"fields":{"slug":"/references/proptypes","title":"Proptypes"}}},{"node":{"fields":{"slug":"/references/sdk","title":"Element SDK Client"}}},{"node":{"fields":{"slug":"/how-to/add-blocks-to-templates","title":"Add Blocks to Templates"}}},{"node":{"fields":{"slug":"/references/styling-your-block-with-css","title":"Styling Your Block With CSS"}}},{"node":{"fields":{"slug":"/how-to/add-external-scripts-from-a-block","title":"Add External Scripts from a Block"}}},{"node":{"fields":{"slug":"/how-to/add-page-to-theme","title":"Add a Page to a Theme"}}},{"node":{"fields":{"slug":"/how-to/add-page-with-uri-parameters","title":"Add a Page That Depends on URI Parameters"}}},{"node":{"fields":{"slug":"/how-to/communicate-between-blocks","title":"Communicate Between Blocks"}}},{"node":{"fields":{"slug":"/how-to/data-third-party-services","title":"Fetch Data from Third-Party Services"}}},{"node":{"fields":{"slug":"/how-to/data-volusion-api","title":"Fetch Data from Volusion's API"}}},{"node":{"fields":{"slug":"/how-to/env-setup","title":"Set up Your Local Environment"}}},{"node":{"fields":{"slug":"/how-to/fetch-data-fast","title":"Fetch Block Data Fast"}}},{"node":{"fields":{"slug":"/how-to/get-approved-to-develop-blocks","title":"Get Approved to Develop Blocks"}}},{"node":{"fields":{"slug":"/how-to/interact-with-the-cart","title":"Interact with the Cart"}}},{"node":{"fields":{"slug":"/how-to/preview-block-changes","title":"Preview Block Changes"}}},{"node":{"fields":{"slug":"/how-to/proptypes","title":"Add Element Proptypes"}}},{"node":{"fields":{"slug":"/how-to/read-page-uri-parameters-in-blocks","title":"Read Page URI Parameters In Blocks"}}},{"node":{"fields":{"slug":"/how-to/release-a-minor-block-change","title":"Release A Minor Block Change"}}},{"node":{"fields":{"slug":"/how-to/reuse-a-block-across-pages","title":"Reuse A Block Across Pages"}}},{"node":{"fields":{"slug":"/how-to/release-a-new-major-block-version","title":"Release A New Major Block Version"}}},{"node":{"fields":{"slug":"/how-to/rollback-a-block-change","title":"Rollback A Block Change"}}},{"node":{"fields":{"slug":"/how-to/set-seo-data-from-a-block","title":"Set SEO Data from a Block"}}},{"node":{"fields":{"slug":"/how-to/style-a-block-with-aphrodite","title":"Style A Block With Aphrodite"}}},{"node":{"fields":{"slug":"/how-to/track-block-versions","title":"Track Block Versions"}}},{"node":{"fields":{"slug":"/how-to/use-react-hooks-in-a-block","title":"Use React Hooks in an Element Block"}}},{"node":{"fields":{"slug":"/explanations/adding-a-blog","title":"Adding a Blog"}}},{"node":{"fields":{"slug":"/explanations/all-the-tech-you-need","title":"All The Tech You Need"}}},{"node":{"fields":{"slug":"/explanations/block-versions","title":"Block Versions"}}},{"node":{"fields":{"slug":"/explanations/e-commerce-pages","title":"Ecommerce Theme Pages"}}},{"node":{"fields":{"slug":"/explanations/element-concepts","title":"Element Concepts"}}},{"node":{"fields":{"slug":"/explanations/keeping-your-site-fast","title":"Keeping Your Site Fast"}}},{"node":{"fields":{"slug":"/explanations/what-is-element","title":"What Is Element?"}}}]}},"pageContext":{"id":"bb1dfabb-2e9f-59f7-a201-3d967fde73df"}}}